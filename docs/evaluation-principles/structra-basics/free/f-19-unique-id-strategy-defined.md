---
title: "F-19 ID Strategy"
---

# F-19 ID Strategy

What This Rule Checks
Structra checks that every entity requiring a globally unique identifier in your system has an explicit ID
generation strategy defined. Auto-incrementing integers from a single database are not suitable for distributed or
sharded systems — they create coordination bottlenecks and produce collisions.

Why Auto-Increment IDs Break in Distributed Systems
Auto-increment IDs (1, 2, 3, 4...) are generated by a single database. This works in a simple single-database
application. It breaks when:

      You shard your database across multiple nodes — each node would generate duplicate IDs independently.
      You generate IDs in application code before writing to the database — there's no central counter.
      You merge data from multiple sources — ID 42 in database A and ID 42 in database B are different
      entities.
      IDs are exposed in URLs — sequential IDs reveal business information (your 1000th customer, your
      daily order volume).

Accepted ID Strategies
UUID (Universally Unique Identifier) A 128-bit random identifier (e.g., 550e8400-e29b-41d4-a716-
446655440000 ). Statistically guaranteed to be unique without any central coordination. Any service, on any
machine, can generate a UUID independently.

Pros: No coordination required, works everywhere. Cons: Random UUIDs are not sequential, which causes
index fragmentation in B-tree indexes (each insert goes to a random position in the index, causing frequent page
splits). UUID v7 (time-ordered) solves this.

Snowflake ID A 64-bit integer composed of a timestamp, a machine/datacenter ID, and a sequence number. The
result is a sortable, unique ID that encodes when it was created. Developed by Twitter to generate unique tweet
IDs at massive scale.

Pros: Numerically compact, sortable by creation time, globally unique without central coordination. Cons:
Requires machine ID assignment and clock synchronization.

Ticket Server A dedicated service that dispenses sequential IDs from a single counter. All services request new
IDs from the ticket server. Flickr famously used this approach.

Pros: Compact sequential integers, familiar. Cons: The ticket server is a single point of failure and a potential
bottleneck at very high ID generation rates.

Why This Rule Exists
Discovering that your ID strategy doesn't work after you've already stored millions of records is a painful
migration. This rule ensures the decision is made deliberately, with the distribution characteristics of the system
in mind, before a line of data is written.
